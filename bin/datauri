#!/usr/bin/env bash
#
# Author:
#   Nicolas Gallagher (@necolas)
#   Newton (@chrisopedia)
#
# Description:
#   Create a data URI from a file and copy it to the pasteboard
#
# Dependencies:
#   none
#
# Configuration:
#   @params   file    an image file (could be any file) to convert
#
# Usage:
#   `datauri filename.jpg`

mimeType=$(file -b --mime-type "$1")
if [[ $mimeType == text/* ]]; then
    mimeType="${mimeType};charset=utf-8"
fi
printf "data:%s;base64,%s"  "${mimeType}" "$(openssl base64 -in "$1" | tr -d '\n')" | pbcopy
